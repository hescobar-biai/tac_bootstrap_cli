# Feature: Create question.md.j2 Template

## Metadata
issue_number: `341`
adw_id: `feature_Tac_11_task_6_2`
issue_json: `{"number":341,"title":"Create question.md.j2 template","body":"feature\n/adw_sdlc_iso\n/adw_id: feature_Tac_11_task_6_2\n\nCreate the Jinja2 template version of the /question command for generated projects.\n\n**Files affected:**\n- `/Users/hernandoescobar/Documents/Celes/tac_bootstrap/tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/question.md.j2`\n\n**Implementation details:**\n- Mirror the implementation from Task 5\n- Use read-only tool restrictions"}`

## Feature Description
Create a Jinja2 template version of the `/question` command that will be used in projects generated by TAC Bootstrap CLI. This template will enable generated projects to have a read-only Q&A command that helps users explore and understand their project structure, architecture, and documentation without modifying any files.

The template should convert the existing `.claude/commands/question.md` file (created in Task 5, PR #336) to Jinja2 format while maintaining its core functionality as a structured, read-only exploration workflow.

## User Story
As a TAC Bootstrap CLI user
I want generated projects to include a `/question` command template
So that end users of generated projects can interactively explore and understand the codebase through guided read-only queries

## Problem Statement
Currently, the TAC Bootstrap repository has a working `/question` command in `.claude/commands/question.md`, but generated projects don't receive this functionality because there's no Jinja2 template version. Users of generated projects need a way to ask questions about their project structure and get structured answers through codebase exploration without risking accidental modifications.

## Solution Statement
Create `question.md.j2` as a Jinja2 template that mirrors the existing `question.md` implementation. The template will be mostly static with minimal dynamic variables (primarily `{{ config.project.name }}` where project-specific context is mentioned). The template preserves the complete read-only Q&A workflow including:
- Question analysis and scoping
- Structured exploration workflow (git ls-files, Read, Glob, Grep)
- Information synthesis and reporting format
- Read-only constraints through instructional guidance

## Relevant Files
Files necessary for implementing the feature:

### Source Files (Reference)
- `.claude/commands/question.md` - The original command implementation created in Task 5 (PR #336, commit 7525c80). This is the base content to convert to Jinja2 format. Contains the complete 92-line read-only Q&A workflow.

### Template Files (Reference for Patterns)
- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/scout.md.j2` - Similar command template showing minimal Jinja2 variable usage for generic exploration commands
- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/start.md.j2` - Example of heavy Jinja2 usage for framework-specific commands (to understand what NOT to do for this generic command)
- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/tools.md.j2` - Another reference for template patterns

### New Files
- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/question.md.j2` - The new Jinja2 template to be created

## Implementation Plan

### Phase 1: Foundation
Read and understand the existing question.md implementation and analyze template patterns from similar commands to determine appropriate Jinja2 usage.

### Phase 2: Core Implementation
Create the question.md.j2 template file with minimal Jinja2 variables, converting the static question.md content while preserving all workflow steps and instructions.

### Phase 3: Integration
Verify the template file is properly located in the templates directory structure and follows naming conventions consistent with other command templates.

## Step by Step Tasks
IMPORTANTE: Ejecutar cada paso en orden.

### Task 1: Read Source Files
- Read `.claude/commands/question.md` to understand the complete implementation (already done)
- Read `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/scout.md.j2` to understand template patterns for similar commands (already done)
- Identify which parts of question.md should remain static vs. which need Jinja2 variables

### Task 2: Create question.md.j2 Template
- Create the file `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/question.md.j2`
- Convert the content from `.claude/commands/question.md` to Jinja2 format
- Add minimal Jinja2 variables where project-specific context is referenced:
  - Replace project name references with `{{ config.project.name }}` if any exist
  - Keep all other content static (workflow steps, instructions, report format)
- Preserve all sections:
  - Title and description
  - Variables section (QUESTION: $ARGUMENTS)
  - Instructions (complete 5-step workflow)
  - Report format
  - Safety notes
- Ensure proper indentation and formatting
- Do NOT add tool restrictions or permissions configuration (these are managed separately in settings.json)
- Do NOT add framework-specific or path-specific logic

### Task 3: Verify Template Structure
- Confirm the file is in the correct location: `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/question.md.j2`
- Verify it follows the same naming pattern as other command templates (*.md.j2)
- Check that the Jinja2 syntax is valid and minimal
- Ensure the template maintains read-only constraints through instructional guidance (no technical restrictions needed)

### Task 4: Validation
Execute all validation commands to ensure no regressions.

## Testing Strategy

### Unit Tests
No specific unit tests required for this template file. The template is primarily static content and will be validated through:
- Linting (ruff) to ensure file formatting
- Manual review to verify content accuracy
- Integration testing when the CLI generates projects using this template

### Edge Cases
- Template rendering with empty/missing config.project.name (should gracefully handle)
- Verification that read-only workflow instructions are preserved exactly
- Ensure no unintended Jinja2 variables or logic blocks are introduced

## Acceptance Criteria
- [ ] File `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/question.md.j2` exists
- [ ] Template content mirrors `.claude/commands/question.md` with minimal Jinja2 modifications
- [ ] Only `{{ config.project.name }}` is used as a dynamic variable (if any variable is needed)
- [ ] All workflow steps (Step 1-5) are preserved exactly
- [ ] Report format section is intact
- [ ] Read-only constraints are clearly stated in Instructions section
- [ ] Safety notes section is preserved
- [ ] File passes ruff linting
- [ ] Template follows naming conventions consistent with other command templates
- [ ] No permissions or hooks configuration is included in the template itself

## Validation Commands
Ejecutar todos los comandos para validar con cero regresiones:

- `cd tac_bootstrap_cli && uv run pytest tests/ -v --tb=short` - Tests unitarios
- `cd tac_bootstrap_cli && uv run ruff check .` - Linting
- `cd tac_bootstrap_cli && uv run mypy tac_bootstrap/` - Type check
- `cd tac_bootstrap_cli && uv run tac-bootstrap --help` - Smoke test

## Notes
- This template is part of Task 6 in the TAC Bootstrap plan, specifically subtask 6.2 (question.md.j2)
- The original question.md was created in Task 5 (PR #336, commit 7525c80)
- The question command is inherently generic and doesn't require framework-specific customization
- Read-only behavior is enforced through instructional constraints rather than technical permissions
- Settings and hooks are managed separately in settings.json template, not within command templates
- This follows the pattern established by other minimally-parameterized command templates like scout.md.j2
- Future enhancements could add more dynamic variables if project-specific customization becomes necessary
