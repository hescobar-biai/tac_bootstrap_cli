# Conditional Docs Fractal Documentation Guidance

**ADW ID:** feature_6_6
**Date:** 2026-01-24
**Specification:** /Volumes/MAc1/Celes/tac_bootstrap/trees/feature_6_6/specs/issue-181-adw-feature_6_6-sdlc_planner-update-conditional-docs-template.md

## Overview

This feature adds conditional rules for Fractal Documentation to the `conditional_docs.md.j2` template and the rendered file in the root of TAC Bootstrap. It guides AI agents on when and how to use fractal documentation tools (`/generate_fractal_docs`, `docs/` directory, `canonical_idk.yml`) that were created in previous Phase 6 tasks, closing the loop between documentation generation and effective consumption.

## What Was Built

- New `## Fractal Documentation` section in conditional_docs template
- Four clear conditional rules for fractal docs usage
- Updated rendered file in project root (`.claude/commands/conditional_docs.md`)
- Jinja2 variable usage for parametrized path references

## Technical Implementation

### Files Modified

- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/conditional_docs.md.j2`: Added new section at the end with four conditional rules using Jinja2 variable `{{ config.paths.app_root | default("src") }}` for path references
- `.claude/commands/conditional_docs.md`: Updated with rendered content using concrete path `tac_bootstrap_cli/` for TAC Bootstrap's dual-purpose (generator + reference)

### Key Changes

- Added conditional rule for reading `docs/` directory when working with documentation or understanding code structure
- Added conditional rule to run `/generate_fractal_docs changed` after creating new modules or capabilities
- Added conditional rule to run `/generate_fractal_docs full` and review `docs/` when refactoring or moving files
- Added conditional rule to read `canonical_idk.yml` when looking for canonical terminology
- All path references use Jinja2 variables with safe defaults (`| default("src")`)

## How to Use

### For Generated Projects

When TAC Bootstrap generates a new project, the `conditional_docs.md` file will include these rules automatically. AI agents working in generated projects will:

1. Consult `docs/` directory when needing to understand module structure
2. Run `/generate_fractal_docs changed` after implementing new features
3. Run `/generate_fractal_docs full` after major refactorings
4. Reference `canonical_idk.yml` for approved domain vocabulary

### For TAC Bootstrap Itself

The root `.claude/commands/conditional_docs.md` file now includes these rules, so AI agents working on TAC Bootstrap can:

1. Read `docs/` for fractal documentation of `tac_bootstrap_cli/` modules
2. Update documentation after adding new generators or templates
3. Maintain canonical terminology consistency across the codebase

## Configuration

The template uses the Jinja2 variable:
- `{{ config.paths.app_root | default("src") }}` - Path to application root (defaults to "src")

This is configured in the project's `config.yml` file under `paths.app_root`.

## Testing

No specific unit tests required for markdown template documentation. Validation performed through:

```bash
cd tac_bootstrap_cli && uv run pytest tests/ -v --tb=short
cd tac_bootstrap_cli && uv run ruff check .
cd tac_bootstrap_cli && uv run mypy tac_bootstrap/
cd tac_bootstrap_cli && uv run tac-bootstrap --help
```

## Notes

**Dual-Purpose Pattern**: TAC Bootstrap serves as both generator and reference, which is why both the Jinja2 template (for generated projects) and the rendered file in root (for TAC Bootstrap itself) were updated.

**Phase 6 Completion**: This is the final task of Phase 6 (Fractal Documentation as Skill). Projects generated by TAC Bootstrap now include:
- IDK docstring generators (task 6.1)
- Bottom-up fractal documentation generator (task 6.2)
- Generator orchestrator (task 6.3)
- `/generate_fractal_docs` slash command (task 6.4)
- Canonical vocabulary in `canonical_idk.yml` (task 6.5)
- Conditional rules for effective usage (task 6.6)

**No Validation Required**: The conditional rules are contextual guidelines. If `/generate_fractal_docs` doesn't exist in a project, the condition simply doesn't apply. AI agents handle missing files/commands intelligently.
