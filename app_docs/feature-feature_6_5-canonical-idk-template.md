# Canonical IDK Vocabulary Template

**ADW ID:** feature_6_5
**Date:** 2026-01-24
**Specification:** specs/issue-180-adw-feature_6_5-sdlc_planner-template-canonical-idk-yml.md

## Overview

This feature implements a Jinja2 template that generates a controlled vocabulary file (`canonical_idk.yml`) for TAC Bootstrap-generated projects. The vocabulary file defines domain-specific keywords used by fractal documentation generators to maintain consistent terminology across all project documentation.

## What Was Built

- Jinja2 template `canonical_idk.yml.j2` that generates language-specific vocabulary
- Python-specific backend and testing domain keywords
- TypeScript-specific frontend and backend domain keywords
- Universal infrastructure and documentation domain keywords
- Conditional rendering based on project language configuration

## Technical Implementation

### Files Modified

- `tac_bootstrap_cli/tac_bootstrap/templates/config/canonical_idk.yml.j2`: New Jinja2 template created for generating canonical vocabulary YAML files
- `specs/issue-180-adw-feature_6_5-sdlc_planner-template-canonical-idk-yml.md`: Complete specification document
- `specs/issue-180-adw-feature_6_5-sdlc_planner-template-canonical-idk-yml-checklist.md`: Implementation checklist

### Key Changes

- Created template with conditional sections based on `config.project.language.value`
- Python projects receive backend domain keywords (API patterns, database, domain models, validation, error handling, dependency injection) and testing domain keywords (pytest ecosystem terms)
- TypeScript projects receive frontend domain keywords (React/component patterns, routing, rendering, styling) and backend domain keywords (NestJS patterns, decorators, DTOs)
- All projects receive universal infrastructure keywords (deployment, CI/CD, monitoring, configuration) and documentation keywords (docstring, jsdoc, fractal-docs)
- Template uses proper YAML indentation (2 spaces) and valid Jinja2 syntax with `.value` accessor for enum comparison
- Extensible structure allows users to add custom domains or keywords

## How to Use

This template is rendered automatically during TAC Bootstrap project generation. For projects generated by TAC Bootstrap:

1. The template renders to `canonical_idk.yml` in the project root
2. Fractal documentation generators (`gen_docstring_jsdocs.py`, `gen_docs_fractal.py`) read this file to extract domain keywords
3. The vocabulary ensures consistent terminology across all generated documentation

To extend the vocabulary in a generated project:

1. Open `canonical_idk.yml` in the project root
2. Add new keywords to existing domains or create new domain sections:
   ```yaml
   domains:
     backend:
       - api-gateway, routing, middleware, authentication, authorization
       - custom-keyword-1, custom-keyword-2  # Your additions

     custom-domain:  # New domain
       - domain-specific, keywords, here
   ```

## Configuration

The template uses the following configuration values:

- `config.project.name`: Project name inserted in header comment
- `config.project.language.value`: Determines which vocabulary sections to include
  - `"python"`: Includes backend + testing domains
  - `"typescript"`: Includes frontend + backend domains
  - Other values: Only includes infrastructure + documentation domains

## Testing

Template validation can be performed by:

1. Running unit tests to verify template rendering:
   ```bash
   cd tac_bootstrap_cli && uv run pytest tests/ -v -k "canonical_idk"
   ```

2. Manual YAML validation after rendering:
   ```bash
   python -c "import yaml; yaml.safe_load(open('canonical_idk.yml'))"
   ```

3. Linting and type checking:
   ```bash
   cd tac_bootstrap_cli && uv run ruff check .
   cd tac_bootstrap_cli && uv run mypy tac_bootstrap/
   ```

## Notes

**Design Considerations:**
- Template uses `config.project.language.value` to access enum string value for conditional rendering
- Graceful degradation for unsupported languages (renders only universal domains)
- Keywords are grouped conceptually on single lines for readability (e.g., "routing, middleware, authentication")
- No rendering for tac_bootstrap repo itself - this is a template for generated projects only

**Integration:**
- Consumed by Task 6.1 (`gen_docstring_jsdocs.py`) and Task 6.2 (`gen_docs_fractal.py`)
- Will be integrated with `scaffold_service.py` project generation in future tasks
- Uses same template rendering infrastructure as `config.yml.j2`

**Extensibility:**
- Users can add new domains or keywords without breaking existing structure
- Future enhancements could include framework-specific vocabulary (FastAPI vs Django, React vs Vue)
- Could support multi-language projects or vocabulary merging from external sources
