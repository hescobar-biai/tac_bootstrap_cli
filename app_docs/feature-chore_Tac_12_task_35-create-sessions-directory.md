---
doc_type: feature
adw_id: chore_Tac_12_task_35
date: 2026-01-31
idk:
  - directory-structure
  - sessions-management
  - scaffold-generation
  - template-rendering
  - gitkeep-convention
tags:
  - chore
  - infrastructure
  - template-base
related_code:
  - tac_bootstrap_cli/tac_bootstrap/application/scaffold_service.py
  - tac_bootstrap_cli/tac_bootstrap/templates/structure/.claude/data/sessions/.gitkeep.j2
  - .claude/data/sessions/.gitkeep
---

# Create .claude/data/sessions Directory with .gitkeep

**ADW ID:** chore_Tac_12_task_35
**Date:** 2026-01-31
**Specification:** issue-487-adw-chore_Tac_12_task_35-create-sessions-directory.md

## Overview

Added a new `.claude/data/sessions/` directory structure to the TAC Bootstrap project template system. This directory is designated for storing session-related data in projects generated by the CLI, supporting the Claude Code workflow integration as part of Wave 5 data directories.

## What Was Built

- **Base repository directory**: `.claude/data/sessions/` with `.gitkeep` file in the TAC Bootstrap repository
- **Jinja2 template**: `.gitkeep.j2` template file for CLI-generated projects
- **Scaffold configuration**: Updated `scaffold_service.py` to include session directory creation in the scaffolding process

## Technical Implementation

### Files Modified

- `tac_bootstrap_cli/tac_bootstrap/application/scaffold_service.py`: Added session directory configuration to the scaffold plan builder
  - Added `.claude/data` directory descriptor for session and data storage
  - Added `.claude/data/sessions` directory descriptor for Claude Code session data
  - Added `.gitkeep` file creation plan with reason "Keep empty directory in Git"

### Files Created

- `.claude/data/sessions/.gitkeep`: Empty file preserving the directory in Git for the base repository
- `tac_bootstrap_cli/tac_bootstrap/templates/structure/.claude/data/sessions/.gitkeep.j2`: Jinja2 template for CLI-generated projects

### Key Changes

- Extended directory hierarchy in `_build_plan()` method to include `.claude/data` and `.claude/data/sessions` entries with descriptive labels
- Added file creation plan entry for `.claude/data/sessions/.gitkeep` with `FileAction.CREATE` action and empty content
- Maintained idempotency principle: all operations are repeatable without side effects
- Followed existing pattern for empty directory preservation using `.gitkeep` convention

## How to Use

### In TAC Bootstrap Repository

The sessions directory is already created and ready:

```bash
# Verify directory exists
ls -la .claude/data/sessions/

# Verify .gitkeep file is present
cat .claude/data/sessions/.gitkeep
```

### For Generated Projects

When you create a new project using the TAC Bootstrap CLI, the sessions directory is automatically created:

```bash
# Generate a new project (automatically includes sessions directory)
tac-bootstrap generate --project my-project --config config.yaml

# Verify in generated project
ls -la my-project/.claude/data/sessions/
```

## Configuration

No additional configuration is required. The directory structure is automatically included in all scaffold plans generated by `scaffold_service.py` through the `_build_plan()` method.

To customize directory creation behavior, modify the directory entries in `scaffold_service.py`:

```python
# Lines 118-119 in scaffold_service.py
(".claude/data", "Session and data storage"),
(".claude/data/sessions", "Claude Code session data"),
```

## Testing

Verify the implementation with the following commands:

```bash
# Check directory structure in base repository
ls -la .claude/data/sessions/

# Verify template exists
ls -la tac_bootstrap_cli/tac_bootstrap/templates/structure/.claude/data/sessions/

# Run unit tests
cd tac_bootstrap_cli && uv run pytest tests/ -v --tb=short
```

Validate that the scaffold service correctly creates the sessions directory when generating projects:

```bash
# Generate a test project and verify sessions directory
cd tac_bootstrap_cli && uv run tac-bootstrap --help
```

## Notes

- The `.gitkeep` file is a Git convention used to preserve empty directories, since Git only tracks files and not empty directories
- The template system maintains a parallel structure in `tac_bootstrap_cli/tac_bootstrap/templates/structure/` that mirrors what will be generated in new projects
- Both the base `.gitkeep` and template `.gitkeep.j2` versions must be present for proper functionality
- The directory is part of the `.claude/` configuration structure used by Claude Code for session management and data storage
- This implementation follows the DDD (Domain-Driven Design) patterns established in the scaffold service
