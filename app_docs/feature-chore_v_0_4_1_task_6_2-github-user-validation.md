---
doc_type: feature
adw_id: chore_v_0_4_1_task_6_2
date: 2026-01-25
idk:
  - github
  - authentication
  - issue-assignment
  - template-sync
  - validation
  - user-management
tags:
  - feature
  - github
  - templates
related_code:
  - tac_bootstrap_cli/tac_bootstrap/templates/adws/adw_modules/github.py.j2
  - adws/adw_modules/github.py
---

# GitHub User Validation Functions in Template

**ADW ID:** chore_v_0_4_1_task_6_2
**Date:** 2026-01-25
**Specification:** specs/issue-222-adw-chore_v_0_4_1_task_6_2-sdlc_planner-sync-github-template.md

## Overview

Synchronized the `github.py.j2` Jinja2 template with the root `github.py` implementation by adding three user validation functions. This ensures that projects generated by tac-bootstrap include GitHub user authentication and issue assignment capabilities from the start.

## What Was Built

Three user validation functions were added to the template that enable:

- **User Authentication Retrieval**: Get the currently authenticated GitHub user login
- **Assignment Checking**: Verify if an issue is assigned to the current user
- **Issue Self-Assignment**: Assign issues to the authenticated user using `@me`

## Technical Implementation

### Files Modified

- `tac_bootstrap_cli/tac_bootstrap/templates/adws/adw_modules/github.py.j2`: Added three new functions after `fetch_issue_comments()` and before `find_keyword_from_comment()` to maintain consistency with the root file structure.

### Key Changes

- **`get_current_gh_user() -> Optional[str]`** (lines 290-308): Calls `gh api user --jq .login` to retrieve the authenticated GitHub user's login name. Returns `None` on failure.

- **`is_issue_assigned_to_me(issue_number: str, repo_path: Optional[str] = None) -> bool`** (lines 311-351): Checks if a specific issue is assigned to the current user by comparing assignees from `gh issue view` output with the result from `get_current_gh_user()`.

- **`assign_issue_to_me(issue_id: str) -> bool`** (lines 354-387): Assigns an issue to the authenticated user using `gh issue edit` with the `--add-assignee @me` flag. Automatically detects the repository from git remote.

- All three functions include proper error handling, type hints, and docstrings following the existing codebase conventions.

## How to Use

These functions are automatically included when generating a new project using tac-bootstrap. They can be used in ADW workflows or scripts that need to interact with GitHub issues.

### Example: Check if issue is assigned to current user

```python
from adws.adw_modules.github import is_issue_assigned_to_me

if is_issue_assigned_to_me("123"):
    print("Issue #123 is assigned to me")
else:
    print("Issue #123 is not assigned to me")
```

### Example: Self-assign an issue

```python
from adws.adw_modules.github import assign_issue_to_me

if assign_issue_to_me("123"):
    print("Successfully assigned issue #123 to me")
else:
    print("Failed to assign issue #123")
```

### Example: Get current GitHub user

```python
from adws.adw_modules.github import get_current_gh_user

user = get_current_gh_user()
if user:
    print(f"Authenticated as: {user}")
else:
    print("Not authenticated or unable to determine user")
```

## Configuration

These functions rely on the GitHub CLI (`gh`) being installed and authenticated:

```bash
# Install GitHub CLI (if not already installed)
brew install gh  # macOS
# or appropriate package manager for your system

# Authenticate with GitHub
gh auth login
```

The functions use environment variables from `get_github_env()` if a `GITHUB_TOKEN` is available.

## Testing

Test the template generation to ensure the new functions are included:

```bash
cd tac_bootstrap_cli && uv run tac-bootstrap --help
```

Run unit tests to validate no regressions:

```bash
cd tac_bootstrap_cli && uv run pytest tests/ -v --tb=short
```

Verify linting passes:

```bash
cd tac_bootstrap_cli && uv run ruff check .
```

Test the functions in a generated project (requires authenticated `gh` CLI):

```bash
# Generate a test project
cd tac_bootstrap_cli && uv run tac-bootstrap generate test-project

# In the generated project, test the functions
cd test-project
python -c "from adws.adw_modules.github import get_current_gh_user; print(get_current_gh_user())"
```

## Notes

- These functions were already implemented in the root `adws/adw_modules/github.py` file (lines 290-387) and have been battle-tested in production workflows.
- The template synchronization ensures consistency between the tac-bootstrap generator and its own implementation.
- No modifications to the logic were made; the functions were copied verbatim to maintain proven behavior.
- The functions maintain the same order as in the source file for easier maintenance and comparison.
- Error handling is graceful, returning `None` or `False` rather than raising exceptions, making these functions suitable for use in automated workflows.
