# Install Template for TAC Bootstrap

**ADW ID:** 738f7a43
**Date:** 2026-01-21
**Specification:** specs/issue-44-adw-738f7a43-sdlc_planner-create-install-template.md

## Overview

Created a new Jinja2 template for the `/install` slash command that provides focused, lightweight dependency installation for projects generated by TAC Bootstrap. This command offers a streamlined alternative to `/prepare_app` when users only need to install dependencies without full environment setup.

## What Was Built

- Jinja2 template at `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/install.md.j2`
- Comprehensive package manager support for 12 different package managers
- Error handling guidance for common installation issues
- Post-installation verification steps
- Idempotent design allowing safe repeated execution

## Technical Implementation

### Files Modified

- `tac_bootstrap_cli/tac_bootstrap/templates/claude/commands/install.md.j2`: **New file** - Template for the `/install` command

### Key Changes

- **Multi-package manager support**: Conditional Jinja2 blocks for all 12 PackageManager enum values (uv, poetry, pip, pipenv, pnpm, npm, yarn, bun, go, cargo, maven, gradle)
- **Installation commands**: Each package manager mapped to its official installation command with proper working directory changes
- **Error handling**: Documented common installation failures (network issues, permissions, version conflicts, missing files) with troubleshooting steps
- **Verification steps**: Post-installation checks for exit codes, dependency artifacts, and lock file updates
- **Report template**: Structured output for dependencies installed, timing, warnings, and errors

## How to Use

### For TAC Bootstrap Users

When generating a new agentic layer with TAC Bootstrap, the `/install` command will be automatically created in the project's `.claude/commands/` directory.

### In Generated Projects

Once TAC Bootstrap generates your agentic layer:

1. Use `/install` to install project dependencies:
   ```bash
   /install
   ```

2. The command will automatically:
   - Detect your package manager from configuration
   - Navigate to your app root
   - Execute the appropriate installation command
   - Verify successful installation
   - Report any errors

3. For comprehensive environment setup including migrations and startup validation, use `/prepare_app` instead

## Configuration

The template uses the following configuration variables:

- `config.project.package_manager.value`: Determines which installation command to execute
- `config.paths.app_root`: Directory where installation command is executed

### Supported Package Managers

| Package Manager | Installation Command |
|----------------|---------------------|
| uv | `uv sync` |
| poetry | `poetry install` |
| pip | `pip install -r requirements.txt` |
| pipenv | `pipenv install` |
| pnpm | `pnpm install` |
| npm | `npm install` |
| yarn | `yarn install` |
| bun | `bun install` |
| go | `go mod download` |
| cargo | `cargo build` |
| maven | `mvn dependency:resolve` |
| gradle | `gradle build --refresh-dependencies` |

## Testing

Template can be tested during TAC Bootstrap development:

```bash
cd tac_bootstrap_cli && uv run pytest tests/ -v -k "install"
```

Or manually tested by rendering:

```python
from tac_bootstrap.domain.models import TACConfig, ProjectSpec, PathsSpec, PackageManager, Language
from tac_bootstrap.infrastructure.template_repo import TemplateRepository

config = TACConfig(
    project=ProjectSpec(
        name="test",
        language=Language.PYTHON,
        package_manager=PackageManager.UV
    ),
    paths=PathsSpec(app_root="app"),
    # ... other config
)

repo = TemplateRepository()
rendered = repo.render_command_template("install.md.j2", config)
print(rendered)
```

## Notes

- **Design philosophy**: Intentionally simpler than `/prepare_app` - focuses exclusively on dependency installation
- **Idempotency**: Safe to run multiple times without side effects
- **Build integration**: Some package managers (cargo, gradle) run builds as part of dependency resolution - this is intentional behavior
- **Go specifics**: Uses `go mod download` instead of `go mod tidy` to avoid modifying go.mod
- **Future enhancement**: The `/prepare_app` command could internally call `/install` if desired
