# TAC Bootstrap Configuration
# Auto-generated by TAC Bootstrap
# Documentation: https://github.com/celes-app/tac-cli-dist

version: "0.3.0"
schema_version: 1

project:
  name: "tac-bootstrap"
  mode: "existing"
  repo_root: "."
  language: "python"
  framework: "none"
  architecture: "ddd"
  package_manager: "uv"

paths:
  app_root: "tac_bootstrap_cli"
  agentic_root: "."
  prompts_dir: "prompts"
  adws_dir: "adws"
  specs_dir: "specs"
  logs_dir: "logs"
  scripts_dir: "scripts"
  worktrees_dir: "trees"

commands:
  start: "uv run tac-bootstrap --help"
  test: "uv run pytest"
  lint: "uv run ruff check ."
  typecheck: "uv run mypy tac_bootstrap_cli"
  format: "uv run ruff format ."
  build: "uv build"

agentic:
  provider: "claude_code"
  target_branch: main  # Rama destino para merge/push (main, master, develop, etc.)
  model_policy:
    default: "sonnet"
    heavy: "opus"
    fallback: "haiku"  # Fallback model when quota is exhausted
    # Optional: Fully qualified model IDs (override hardcoded defaults via config)
    opus_model: "claude-opus-4-5-20251101"
    sonnet_model: "claude-sonnet-4-5-20250929"
    haiku_model: "claude-haiku-4-5-20251001"
  worktrees:
    enabled: true
    max_parallel: 5
    naming: "feat-{slug}-{timestamp}"
  logging:
    level: "INFO"
    capture_agent_transcript: true
    run_id_strategy: "uuid"
  safety:
    require_tests_pass: true
    require_review_artifacts: true
    allowed_paths:
      - "tac_bootstrap_cli/"
      - "adws/"
      - "scripts/"
      - "specs/"
      - "tests/"
    forbidden_paths:
      - ".env"
      - "secrets/"
  workflows:
    default: "sdlc_iso"
    available:
      - "sdlc_iso"
      - "patch_iso"
      - "plan_implement"
  token_optimization:
    max_issue_body_length: 2000  # Truncate issue body to reduce token usage
    max_file_reference_size: 5000  # Max chars per referenced file
    max_clarification_length: 3000  # Max chars for clarification responses
    max_docs_planning: 2  # Max documentation files to load in planning phase
    max_summary_tokens_planning: 200  # Max tokens per doc summary in planning
    max_file_references: 3  # Max number of files to load from issue references
    max_screenshots: 3  # Max screenshots to upload in review phase

claude:
  settings:
    project_name: "tac-bootstrap"
    preferred_style: "concise"
    allow_shell: true
  commands:
    prime: ".claude/commands/prime.md"
    start: ".claude/commands/start.md"
    build: ".claude/commands/build.md"
    test: ".claude/commands/test.md"
    review: ".claude/commands/review.md"
    ship: ".claude/commands/ship.md"

templates:
  plan_template: "prompts/templates/plan.md"
  chore_template: "prompts/templates/chore.md"
  feature_template: "prompts/templates/feature.md"
  bug_template: "prompts/templates/bug.md"
  review_template: "prompts/templates/review.md"

orchestrator:
  enabled: true
  api_base_url: "http://localhost:8000"
  ws_base_url: "ws://localhost:8000"
  frontend_port: 5173
  websocket_port: 8000
  database_url: "sqlite:///data/orchestrator.db"
  polling_interval: 5000

bootstrap:
  create_git_repo: false
  initial_commit: false
  license: "MIT"
  readme: true
