# AI Developer Workflows (ADWs)

Este directorio contiene los workflows automatizados para {{ config.project.name }}.

## Estructura

```
{{ config.paths.adws_dir }}/
├── adw_modules/          # Modulos compartidos
│   ├── agent.py          # Wrapper de Claude Code CLI
│   ├── state.py          # Persistencia de estado
│   ├── git_ops.py        # Operaciones git
│   └── workflow_ops.py   # Orquestacion
├── adw_sdlc_iso.py       # Workflow SDLC completo
├── adw_patch_iso.py      # Workflow de patch rapido
└── adw_triggers/         # Triggers automaticos
    ├── trigger_cron.py        # Polling de tareas
    ├── trigger_issue_chain.py # Procesamiento secuencial
    └── trigger_webhook.py     # Eventos en tiempo real
```

## Workflows Disponibles

### SDLC Iso (Isolated)
Workflow completo: Plan → Build → Test → Review → Ship

```bash
{{ config.project.package_manager.value }} run python {{ config.paths.adws_dir }}/adw_sdlc_iso.py --issue 123
```

### Patch Iso
Workflow rapido para fixes: Build → Test → Ship

```bash
{{ config.project.package_manager.value }} run python {{ config.paths.adws_dir }}/adw_patch_iso.py --issue 456
```

## Conceptos Clave

### Aislamiento (Iso)
Cada workflow corre en su propio git worktree para evitar conflictos.
Los worktrees se crean en `{{ config.paths.worktrees_dir }}/`.

### Estado Persistente
El estado de cada workflow se guarda en `agents/{adw_id}/adw_state.json`.

## Configuration

### ADW Tracking
Each workflow run gets a unique 8-character ID (e.g., `a1b2c3d4`) that appears in:
- Issue comments: `a1b2c3d4_ops: ✅ Starting ADW workflow`
- Output files: `agents/a1b2c3d4/sdlc_planner/raw_output.jsonl`
- Git commits and PRs

### Trigger Polling Configuration

ADW triggers use polling intervals to check GitHub for new workflow commands.

#### Default Interval
All polling-based triggers default to **20 seconds** between checks.

#### Overriding via CLI
Use the `--interval` or `-i` flag to customize:

```bash
# Poll every 30 seconds
{{ config.project.package_manager.value }} run python {{ config.paths.adws_dir }}/adw_triggers/trigger_cron.py --interval 30

# Poll every 60 seconds
{{ config.project.package_manager.value }} run python {{ config.paths.adws_dir }}/adw_triggers/trigger_issue_chain.py --issues 1,2,3 -i 60
```

#### Recommended Intervals
| Use Case | Interval | Rationale |
|----------|----------|-----------|
| Development/Testing | 10-20s | Fast feedback during testing |
| Production (light usage) | 30-60s | Balance responsiveness and API limits |
| Production (heavy usage) | 60-120s | Avoid GitHub API rate limiting |
| CI/CD Integration | Use `--once` | Single execution, no polling |

#### API Rate Limiting
GitHub's API allows 5,000 requests/hour for authenticated users. Each polling cycle makes approximately 1-3 API calls depending on open issues. With default 20s interval:
- ~180 cycles/hour
- ~180-540 API calls/hour
- Safe margin for other operations

For repositories with many open issues, consider increasing the interval.
