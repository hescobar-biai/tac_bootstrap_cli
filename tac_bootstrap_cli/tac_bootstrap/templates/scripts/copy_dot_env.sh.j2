#!/bin/bash
# Copy .env files from reference project
# For {{ config.project.name }}
# Auto-generated by TAC Bootstrap

{% if config.project.framework in ["fastapi", "express", "next"] %}
# Check and copy root .env file
if [ -f "../{{ config.project.name }}/.env" ]; then
    cp ../{{ config.project.name }}/.env .env
    echo "Successfully copied ../{{ config.project.name }}/.env to .env"
else
    echo "Warning: ../{{ config.project.name }}/.env does not exist"
fi

# Check and copy server .env file
if [ -f "../{{ config.project.name }}/{{ config.paths.app_root | default('app/server') }}/.env" ]; then
    cp ../{{ config.project.name }}/{{ config.paths.app_root | default('app/server') }}/.env {{ config.paths.app_root | default('app/server') }}/.env
    echo "Successfully copied server .env"
else
    echo "Error: ../{{ config.project.name }}/{{ config.paths.app_root | default('app/server') }}/.env does not exist"
    exit 1
fi
{% else %}
# Check and copy root .env file
if [ -f ".env.example" ]; then
    if [ ! -f ".env" ]; then
        cp .env.example .env
        echo "Created .env from .env.example"
    else
        echo ".env already exists (skipping)"
    fi
else
    echo "Warning: No .env.example found"
fi
{% endif %}
