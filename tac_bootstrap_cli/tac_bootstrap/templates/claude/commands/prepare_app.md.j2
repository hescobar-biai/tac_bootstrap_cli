# Prepare Application

Prepare the {{ config.project.name }} development environment for tests or reviews.

## Instructions

{% if config.paths.app_root %}
### If {{ config.paths.app_root }}/ exists:

1. **Sync dependencies**
   ```bash
{% if config.project.package_manager.value == "uv" %}
   cd {{ config.paths.app_root }} && uv sync
{% elif config.project.package_manager.value == "poetry" %}
   cd {{ config.paths.app_root }} && poetry install
{% elif config.project.package_manager.value == "pip" %}
   cd {{ config.paths.app_root }} && pip install -r requirements.txt
{% elif config.project.package_manager.value == "pipenv" %}
   cd {{ config.paths.app_root }} && pipenv install
{% elif config.project.package_manager.value == "pnpm" %}
   cd {{ config.paths.app_root }} && pnpm install
{% elif config.project.package_manager.value == "npm" %}
   cd {{ config.paths.app_root }} && npm install
{% elif config.project.package_manager.value == "yarn" %}
   cd {{ config.paths.app_root }} && yarn install
{% elif config.project.package_manager.value == "bun" %}
   cd {{ config.paths.app_root }} && bun install
{% elif config.project.package_manager.value == "go" %}
   cd {{ config.paths.app_root }} && go mod download
{% elif config.project.package_manager.value == "cargo" %}
   cd {{ config.paths.app_root }} && cargo build
{% elif config.project.package_manager.value == "maven" %}
   cd {{ config.paths.app_root }} && mvn dependency:resolve
{% elif config.project.package_manager.value == "gradle" %}
   cd {{ config.paths.app_root }} && gradle build --refresh-dependencies
{% endif %}
   ```

{% if config.project.framework and config.project.framework.value == "django" %}
2. **Run migrations**
   ```bash
{% if config.project.package_manager.value in ["uv", "poetry", "pipenv"] %}
   {{ config.project.package_manager.value }} run python manage.py migrate
{% else %}
   python manage.py migrate
{% endif %}
   ```
{% endif %}

{% if config.commands.build %}
{% if config.project.framework and config.project.framework.value == "django" %}
3. **Build Application**
{% else %}
2. **Build Application**
{% endif %}
   ```bash
   {{ config.commands.build }}
   ```
{% endif %}

{% if config.project.framework and config.project.framework.value == "django" %}
4. **Validate Application Can Start**
{% elif config.commands.build %}
3. **Validate Application Can Start**
{% else %}
2. **Validate Application Can Start**
{% endif %}
   ```bash
{% if config.commands.start %}
   {{ config.commands.start }} --help
{% endif %}
   ```

{% if config.project.framework and config.project.framework.value == "django" %}
5. **Run quick tests**
{% elif config.commands.build %}
4. **Run quick tests**
{% else %}
3. **Run quick tests**
{% endif %}
   ```bash
{% if config.commands.test %}
   {{ config.commands.test }} -x --tb=short
{% endif %}
   ```
{% endif %}

### If {{ config.paths.app_root }}/ does NOT exist:

1. **Inform state**
   - The application has not been created yet
   - Cannot prepare the development environment

2. **Suggest next step**
   - Follow setup instructions in {{ config.paths.specs_dir }}/ to create the application

## Report

After running the above steps, report:

1. **Dependencies status**: All dependencies synchronized successfully
2. **{% if config.project.framework and config.project.framework.value == "django" %}Migrations status{% endif %}**: {% if config.project.framework and config.project.framework.value == "django" %}All migrations applied successfully{% endif %}
3. **{% if config.commands.build %}Build status{% endif %}**: {% if config.commands.build %}Application built successfully{% endif %}
4. **Application validation**: Application can start (verified with --help)
5. **Test status**: Quick tests passed

## Notes

- This command prepares the environment for application development
- For example app tests (if applicable), use scripts in `{{ config.paths.scripts_dir }}/`
- Read documentation in {{ config.paths.specs_dir }}/ to understand current project state
